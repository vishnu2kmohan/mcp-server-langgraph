# =============================================================================
# Test Environment Configuration
# =============================================================================
# This file contains test environment defaults for `make test-infra-up`.
# It is checked into git and provides the source of truth for test config.
#
# Override locally with:
#   - .env.test.local (gitignored, personal overrides)
#   - Shell environment variables
#
# Docker networking values (container hostnames like redis-test, postgres-test)
# are set in docker-compose.test.yml environment: block as they require
# compose-level interpolation.
#
# 12-Factor Compliance:
#   - Config separated from code ✓
#   - Environment variables ✓
#   - No production secrets ✓ (test-only credentials)
#
# Synchronization:
#   Values here MUST match:
#   - docker-compose.test.yml environment: block
#   - tests/constants.py
#   - .github/workflows/e2e-tests.yaml env: section
#
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
ENVIRONMENT=test
TESTING=true
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# JWT Authentication (test-only secret, safe to commit)
# -----------------------------------------------------------------------------
# IMPORTANT: This MUST match docker-compose.test.yml and tests/constants.py
JWT_SECRET_KEY=test-jwt-secret-key-for-e2e-testing-only

# -----------------------------------------------------------------------------
# Conversation Checkpointing (Agent Memory)
# -----------------------------------------------------------------------------
# Enable Redis-backed checkpointing for conversation persistence
CHECKPOINT_BACKEND=redis
CHECKPOINT_REDIS_TTL=604800

# -----------------------------------------------------------------------------
# Database (test credentials, safe to commit)
# -----------------------------------------------------------------------------
# PostgreSQL connection - host set in docker-compose.test.yml (postgres-test)
POSTGRES_PORT=5432
POSTGRES_DB=mcp_test
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
AUTH_PROVIDER=keycloak
KEYCLOAK_REALM=default
KEYCLOAK_CLIENT_ID=mcp-server
KEYCLOAK_CLIENT_SECRET=test-client-secret-for-e2e-tests
KEYCLOAK_ADMIN_PASSWORD=admin

# -----------------------------------------------------------------------------
# GDPR/Compliance
# -----------------------------------------------------------------------------
GDPR_STORAGE_BACKEND=postgres

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
OTEL_SDK_DISABLED=false
OTEL_SERVICE_NAME=mcp-server-test

# -----------------------------------------------------------------------------
# Feature Flags (optional overrides from defaults)
# -----------------------------------------------------------------------------
# Uncomment to override default feature flag values:
# FF_ENABLE_DETAILED_LOGGING=true
# FF_ENABLE_OPENFGA=true
# FF_ENABLE_KEYCLOAK=true
