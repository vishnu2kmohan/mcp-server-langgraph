{
  "openapi": "3.1.0",
  "info": {
    "title": "MCP Server with LangGraph",
    "description": "AI Agent with fine-grained authorization and observability - StreamableHTTP transport",
    "version": "2.8.0"
  },
  "paths": {
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint with server info",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Root  Get"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Login",
        "description": "Authenticate user and return JWT token\n\nThis endpoint accepts username and password, validates credentials,\nand returns a JWT token that can be used for subsequent tool calls.\n\nThe token should be included in the 'token' field of all tool call requests.\n\nExample:\n    POST /auth/login\n    {\n        \"username\": \"alice\",\n        \"password\": \"alice123\"\n    }\n\n    Response:\n    {\n        \"access_token\": \"eyJ...\",\n        \"token_type\": \"bearer\",\n        \"expires_in\": 3600,\n        \"user_id\": \"user:alice\",\n        \"username\": \"alice\",\n        \"roles\": [\"user\", \"premium\"]\n    }",
        "operationId": "login_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Refresh Token",
        "description": "Refresh authentication token\n\nSupports two refresh methods:\n1. Keycloak: Uses refresh_token to get new access token\n2. InMemory: Validates current token and issues new one\n\nExample (Keycloak):\n    POST /auth/refresh\n    {\n        \"refresh_token\": \"eyJ...\"\n    }\n\nExample (InMemory):\n    POST /auth/refresh\n    {\n        \"current_token\": \"eyJ...\"\n    }\n\nResponse:\n    {\n        \"access_token\": \"eyJ...\",\n        \"token_type\": \"bearer\",\n        \"expires_in\": 3600,\n        \"refresh_token\": \"eyJ...\"  // Keycloak only\n    }",
        "operationId": "refresh_token_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshTokenResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/message": {
      "post": {
        "summary": "Handle Message",
        "description": "Handle MCP messages via StreamableHTTP POST\n\nThis is the main endpoint for MCP protocol messages.\nSupports both regular and streaming responses.",
        "operationId": "handle_message_message_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/tools": {
      "get": {
        "summary": "List Tools",
        "description": "List available tools (convenience endpoint)",
        "operationId": "list_tools_tools_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response List Tools Tools Get"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/resources": {
      "get": {
        "summary": "List Resources",
        "description": "List available resources (convenience endpoint)",
        "operationId": "list_resources_resources_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response List Resources Resources Get"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/version": {
      "get": {
        "tags": [
          "API Metadata"
        ],
        "summary": "Get API version information",
        "description": "Returns API version metadata for client compatibility checking.\n\n    **Versioning Strategy:**\n    - **Semantic Versioning**: MAJOR.MINOR.PATCH\n    - **URL Versioning**: `/api/v1`, `/api/v2`, etc.\n    - **Header Negotiation**: `X-API-Version: 1.0` (optional)\n    - **Deprecation Policy**: 6-month sunset period for deprecated versions\n\n    **Breaking Changes:**\n    - Removing fields from responses\n    - Changing field types\n    - Removing endpoints\n    - Changing authentication methods\n\n    **Non-Breaking Changes:**\n    - Adding new endpoints\n    - Adding new optional fields to requests\n    - Adding new fields to responses\n    - Adding new query parameters (optional)\n\n    Use this endpoint to:\n    - Check current API version\n    - Determine if your client is compatible\n    - Find out when deprecated versions will be removed\n    - Locate API documentation",
        "operationId": "get_api_version_metadata",
        "responses": {
          "200": {
            "description": "API version information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIVersionInfo"
                },
                "example": {
                  "version": "2.8.0",
                  "api_version": "v1",
                  "supported_versions": [
                    "v1"
                  ],
                  "deprecated_versions": [],
                  "sunset_dates": {},
                  "documentation_url": "/docs"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/v1/users/me/data": {
      "get": {
        "tags": [
          "GDPR Compliance"
        ],
        "summary": "Get User Data",
        "description": "Export all user data (GDPR Article 15 - Right to Access)\n\nReturns all personal data associated with the authenticated user.\n\n**GDPR Article 15**: The data subject shall have the right to obtain from the\ncontroller confirmation as to whether or not personal data concerning him or\nher are being processed, and access to the personal data.\n\n**Response**: Complete JSON export of all user data including:\n- User profile\n- Sessions\n- Conversations\n- Preferences\n- Audit log\n- Consents",
        "operationId": "get_user_data_api_v1_users_me_data_get",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDataExport"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me/export": {
      "get": {
        "tags": [
          "GDPR Compliance"
        ],
        "summary": "Export User Data",
        "description": "Export user data in portable format (GDPR Article 20 - Right to Data Portability)\n\n**GDPR Article 20**: The data subject shall have the right to receive the personal\ndata concerning him or her in a structured, commonly used and machine-readable format.\n\n**Query Parameters**:\n- `format`: Export format (json or csv)\n\n**Response**: File download in requested format",
        "operationId": "export_user_data_api_v1_users_me_export_get",
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(json|csv)$",
              "description": "Export format: json or csv",
              "default": "json",
              "title": "Format"
            },
            "description": "Export format: json or csv"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me": {
      "patch": {
        "tags": [
          "GDPR Compliance"
        ],
        "summary": "Update User Profile",
        "description": "Update user profile (GDPR Article 16 - Right to Rectification)\n\n**GDPR Article 16**: The data subject shall have the right to obtain from the\ncontroller without undue delay the rectification of inaccurate personal data\nconcerning him or her.\n\n**Request Body**: Profile fields to update (only provided fields are updated)\n\n**Response**: Updated user profile",
        "operationId": "update_user_profile_api_v1_users_me_patch",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_update_user_profile_api_v1_users_me_patch"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Update User Profile Api V1 Users Me Patch"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "GDPR Compliance"
        ],
        "summary": "Delete User Account",
        "description": "Delete user account and all data (GDPR Article 17 - Right to Erasure)\n\n**WARNING**: This is an irreversible operation that permanently deletes all user data.\n\n**GDPR Article 17**: The data subject shall have the right to obtain from the\ncontroller the erasure of personal data concerning him or her without undue delay.\n\n**Query Parameters**:\n- `confirm`: Must be set to `true` to confirm deletion\n\n**What gets deleted**:\n- User profile and account\n- All sessions\n- All conversations and messages\n- All preferences and settings\n- All authorization tuples\n\n**What gets anonymized** (retained for compliance):\n- Audit logs (user_id replaced with hash)\n\n**Response**: Deletion result with details",
        "operationId": "delete_user_account_api_v1_users_me_delete",
        "parameters": [
          {
            "name": "confirm",
            "in": "query",
            "required": true,
            "schema": {
              "type": "boolean",
              "description": "Must be true to confirm account deletion",
              "title": "Confirm"
            },
            "description": "Must be true to confirm account deletion"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete User Account Api V1 Users Me Delete"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me/consent": {
      "get": {
        "tags": [
          "GDPR Compliance"
        ],
        "summary": "Get Consent Status",
        "description": "Get current consent status (GDPR Article 21 - Right to Object)\n\nReturns all consent preferences for the authenticated user.\n\n**Response**: Current consent status for all consent types",
        "operationId": "get_consent_status_api_v1_users_me_consent_get",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsentResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "GDPR Compliance"
        ],
        "summary": "Update Consent",
        "description": "Update user consent preferences (GDPR Article 21 - Right to Object)\n\n**GDPR Article 21**: The data subject shall have the right to object at any time\nto processing of personal data concerning him or her.\n\n**Request Body**: Consent type and whether it's granted\n\n**Response**: Current consent status for all types",
        "operationId": "update_consent_api_v1_users_me_consent_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_update_consent_api_v1_users_me_consent_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsentResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/api-keys/": {
      "get": {
        "tags": [
          "API Keys"
        ],
        "summary": "List Api Keys",
        "description": "List all API keys for the current user\n\nReturns metadata for all keys (name, created, expires, last_used).\nDoes not include the actual API keys.",
        "operationId": "list_api_keys_api_v1_api_keys__get",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/APIKeyResponse"
                  },
                  "type": "array",
                  "title": "Response List Api Keys Api V1 Api Keys  Get"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "API Keys"
        ],
        "summary": "Create Api Key",
        "description": "Create a new API key for the current user\n\nCreates a cryptographically secure API key with bcrypt hashing.\n**Save the returned api_key securely** - it will not be shown again.\n\nMaximum 5 keys per user. Revoke an existing key before creating more.\n\nExample:\n    ```json\n    {\n        \"name\": \"Production API Key\",\n        \"expires_days\": 365\n    }\n    ```",
        "operationId": "create_api_key_api_v1_api_keys__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_api_key_api_v1_api_keys__post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateAPIKeyResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/api-keys/{key_id}/rotate": {
      "post": {
        "tags": [
          "API Keys"
        ],
        "summary": "Rotate Api Key",
        "description": "Rotate an API key\n\nGenerates a new API key while keeping the same key_id.\nThe old key is invalidated immediately.\n\n**Save the new_api_key securely** - update your client configuration.",
        "operationId": "rotate_api_key_api_v1_api_keys__key_id__rotate_post",
        "parameters": [
          {
            "name": "key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Key Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RotateAPIKeyResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/api-keys/{key_id}": {
      "delete": {
        "tags": [
          "API Keys"
        ],
        "summary": "Revoke Api Key",
        "description": "Revoke an API key\n\nPermanently deletes the API key. This action cannot be undone.\nAny clients using this key will immediately lose access.",
        "operationId": "revoke_api_key_api_v1_api_keys__key_id__delete",
        "parameters": [
          {
            "name": "key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Key Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/service-principals/": {
      "get": {
        "tags": [
          "Service Principals"
        ],
        "summary": "List Service Principals",
        "description": "List service principals owned by the current user\n\nReturns all service principals where the current user is the owner.\nDoes not include client secrets.",
        "operationId": "list_service_principals_api_v1_service_principals__get",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ServicePrincipalResponse"
                  },
                  "type": "array",
                  "title": "Response List Service Principals Api V1 Service Principals  Get"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Service Principals"
        ],
        "summary": "Create Service Principal",
        "description": "Create a new service principal\n\nCreates a service principal with the specified authentication mode.\nThe calling user becomes the owner of the service principal.\n\nReturns the created service principal with credentials (client_secret).\n**Save the client_secret securely** - it will not be shown again.\n\nExample:\n    ```json\n    {\n        \"name\": \"Batch ETL Job\",\n        \"description\": \"Nightly data processing\",\n        \"authentication_mode\": \"client_credentials\",\n        \"associated_user_id\": \"user:alice\",\n        \"inherit_permissions\": true\n    }\n    ```",
        "operationId": "create_service_principal_api_v1_service_principals__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_service_principal_api_v1_service_principals__post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateServicePrincipalResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/service-principals/{service_id}": {
      "get": {
        "tags": [
          "Service Principals"
        ],
        "summary": "Get Service Principal",
        "description": "Get details of a specific service principal\n\nReturns service principal details if the current user is the owner.",
        "operationId": "get_service_principal_api_v1_service_principals__service_id__get",
        "parameters": [
          {
            "name": "service_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Service Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServicePrincipalResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Service Principals"
        ],
        "summary": "Delete Service Principal",
        "description": "Delete a service principal\n\nPermanently deletes the service principal from Keycloak and OpenFGA.\nThis action cannot be undone.",
        "operationId": "delete_service_principal_api_v1_service_principals__service_id__delete",
        "parameters": [
          {
            "name": "service_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Service Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/service-principals/{service_id}/rotate-secret": {
      "post": {
        "tags": [
          "Service Principals"
        ],
        "summary": "Rotate Service Principal Secret",
        "description": "Rotate service principal secret\n\nGenerates a new client secret for the service principal.\nThe old secret will be invalidated immediately.\n\n**Save the new client_secret securely** - update your service configuration\nbefore the old secret expires.",
        "operationId": "rotate_service_principal_secret_api_v1_service_principals__service_id__rotate_secret_post",
        "parameters": [
          {
            "name": "service_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Service Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RotateSecretResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/service-principals/{service_id}/associate-user": {
      "post": {
        "tags": [
          "Service Principals"
        ],
        "summary": "Associate Service Principal With User",
        "description": "Associate service principal with a user for permission inheritance\n\nLinks a service principal to a user, optionally enabling permission inheritance.\nWhen inherit_permissions is true, the service principal can act on behalf of\nthe user and inherit all their permissions.",
        "operationId": "associate_service_principal_with_user_api_v1_service_principals__service_id__associate_user_post",
        "parameters": [
          {
            "name": "service_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Service Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "inherit_permissions",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Inherit Permissions"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServicePrincipalResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/scim/v2/Users": {
      "post": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "Create User",
        "description": "Create a new user (SCIM 2.0)\n\nProvisions user in Keycloak and syncs roles to OpenFGA.\n\nExample:\n    ```json\n    {\n        \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n        \"userName\": \"alice@example.com\",\n        \"name\": {\n            \"givenName\": \"Alice\",\n            \"familyName\": \"Smith\"\n        },\n        \"emails\": [{\n            \"value\": \"alice@example.com\",\n            \"primary\": true\n        }],\n        \"active\": true\n    }\n    ```",
        "operationId": "create_user_scim_v2_Users_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_user_scim_v2_Users_post"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SCIMUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "List Users",
        "description": "List/search users (SCIM 2.0)\n\nSupports basic filtering (e.g., 'userName eq \"alice@example.com\"').",
        "operationId": "list_users_scim_v2_Users_get",
        "parameters": [
          {
            "name": "filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "SCIM filter expression",
              "title": "Filter"
            },
            "description": "SCIM filter expression"
          },
          {
            "name": "startIndex",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "1-based start index",
              "default": 1,
              "title": "Startindex"
            },
            "description": "1-based start index"
          },
          {
            "name": "count",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Number of results",
              "default": 100,
              "title": "Count"
            },
            "description": "Number of results"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SCIMListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/scim/v2/Users/{user_id}": {
      "get": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "Get User",
        "description": "Get user by ID (SCIM 2.0)\n\nReturns user in SCIM format.",
        "operationId": "get_user_scim_v2_Users__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SCIMUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "Replace User",
        "description": "Replace user (SCIM 2.0 PUT)\n\nReplaces entire user resource.",
        "operationId": "replace_user_scim_v2_Users__user_id__put",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_replace_user_scim_v2_Users__user_id__put"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SCIMUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "Update User",
        "description": "Update user with PATCH operations (SCIM 2.0)\n\nSupports add, remove, replace operations.\n\nExample:\n    ```json\n    {\n        \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:PatchOp\"],\n        \"Operations\": [\n            {\n                \"op\": \"replace\",\n                \"path\": \"active\",\n                \"value\": false\n            }\n        ]\n    }\n    ```",
        "operationId": "update_user_scim_v2_Users__user_id__patch",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_update_user_scim_v2_Users__user_id__patch"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SCIMUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "Delete User",
        "description": "Delete (deactivate) user (SCIM 2.0)\n\nDeactivates user in Keycloak and removes OpenFGA tuples.",
        "operationId": "delete_user_scim_v2_Users__user_id__delete",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/scim/v2/Groups": {
      "post": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "Create Group",
        "description": "Create a new group (SCIM 2.0)\n\nExample:\n    ```json\n    {\n        \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:Group\"],\n        \"displayName\": \"Engineering\",\n        \"members\": [\n            {\"value\": \"user-id-123\", \"display\": \"Alice Smith\"}\n        ]\n    }\n    ```",
        "operationId": "create_group_scim_v2_Groups_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_group_scim_v2_Groups_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SCIMGroup"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/scim/v2/Groups/{group_id}": {
      "get": {
        "tags": [
          "SCIM 2.0"
        ],
        "summary": "Get Group",
        "description": "Get group by ID (SCIM 2.0)",
        "operationId": "get_group_scim_v2_Groups__group_id__get",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Group Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SCIMGroup"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          },
          "429": {
            "description": "Too Many Requests - Rate limit exceeded"
          },
          "500": {
            "description": "Internal Server Error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "APIKeyResponse": {
        "properties": {
          "key_id": {
            "type": "string",
            "title": "Key Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "created": {
            "type": "string",
            "title": "Created"
          },
          "expires_at": {
            "type": "string",
            "title": "Expires At"
          },
          "last_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used"
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "name",
          "created",
          "expires_at"
        ],
        "title": "APIKeyResponse",
        "description": "Response containing API key metadata"
      },
      "APIVersionInfo": {
        "properties": {
          "version": {
            "type": "string",
            "title": "Version",
            "description": "Application version (semantic versioning: MAJOR.MINOR.PATCH)",
            "examples": [
              "2.8.0"
            ]
          },
          "api_version": {
            "type": "string",
            "title": "Api Version",
            "description": "Current API version (e.g., 'v1')",
            "examples": [
              "v1"
            ]
          },
          "supported_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Supported Versions",
            "description": "List of supported API versions",
            "examples": [
              [
                "v1"
              ]
            ]
          },
          "deprecated_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Deprecated Versions",
            "description": "List of deprecated API versions (still functional but will be removed)",
            "examples": [
              []
            ]
          },
          "sunset_dates": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Sunset Dates",
            "description": "Sunset dates for deprecated versions (ISO 8601 format)",
            "examples": [
              {}
            ]
          },
          "changelog_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Changelog Url",
            "description": "URL to API changelog",
            "examples": [
              "https://docs.example.com/api/changelog"
            ]
          },
          "documentation_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Documentation Url",
            "description": "URL to API documentation",
            "examples": [
              "https://docs.example.com/api/v1"
            ]
          }
        },
        "type": "object",
        "required": [
          "version",
          "api_version",
          "supported_versions"
        ],
        "title": "APIVersionInfo",
        "description": "API version metadata\n\nFollows semantic versioning (MAJOR.MINOR.PATCH):\n- MAJOR: Breaking changes (incompatible API changes)\n- MINOR: New features (backward-compatible)\n- PATCH: Bug fixes (backward-compatible)"
      },
      "Body_create_api_key_api_v1_api_keys__post": {
        "properties": {
          "request": {
            "$ref": "#/components/schemas/CreateAPIKeyRequest"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "request"
        ],
        "title": "Body_create_api_key_api_v1_api_keys__post"
      },
      "Body_create_group_scim_v2_Groups_post": {
        "properties": {
          "group_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Group Data"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "group_data"
        ],
        "title": "Body_create_group_scim_v2_Groups_post"
      },
      "Body_create_service_principal_api_v1_service_principals__post": {
        "properties": {
          "request": {
            "$ref": "#/components/schemas/CreateServicePrincipalRequest"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "request"
        ],
        "title": "Body_create_service_principal_api_v1_service_principals__post"
      },
      "Body_create_user_scim_v2_Users_post": {
        "properties": {
          "user_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "User Data"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "user_data"
        ],
        "title": "Body_create_user_scim_v2_Users_post"
      },
      "Body_replace_user_scim_v2_Users__user_id__put": {
        "properties": {
          "user_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "User Data"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "user_data"
        ],
        "title": "Body_replace_user_scim_v2_Users__user_id__put"
      },
      "Body_update_consent_api_v1_users_me_consent_post": {
        "properties": {
          "consent": {
            "$ref": "#/components/schemas/ConsentRecord"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "consent"
        ],
        "title": "Body_update_consent_api_v1_users_me_consent_post"
      },
      "Body_update_user_profile_api_v1_users_me_patch": {
        "properties": {
          "profile_update": {
            "$ref": "#/components/schemas/UserProfileUpdate"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "profile_update"
        ],
        "title": "Body_update_user_profile_api_v1_users_me_patch"
      },
      "Body_update_user_scim_v2_Users__user_id__patch": {
        "properties": {
          "patch_request": {
            "$ref": "#/components/schemas/SCIMPatchRequest"
          },
          "credentials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HTTPAuthorizationCredentials"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "patch_request"
        ],
        "title": "Body_update_user_scim_v2_Users__user_id__patch"
      },
      "ConsentRecord": {
        "properties": {
          "consent_type": {
            "$ref": "#/components/schemas/ConsentType",
            "description": "Type of consent"
          },
          "granted": {
            "type": "boolean",
            "title": "Granted",
            "description": "Whether consent is granted"
          },
          "timestamp": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timestamp",
            "description": "ISO timestamp (auto-generated)"
          },
          "ip_address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ip Address",
            "description": "IP address (auto-captured)"
          },
          "user_agent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Agent",
            "description": "User agent (auto-captured)"
          }
        },
        "type": "object",
        "required": [
          "consent_type",
          "granted"
        ],
        "title": "ConsentRecord",
        "description": "Consent record for GDPR Article 21",
        "example": {
          "consent_type": "analytics",
          "granted": true
        }
      },
      "ConsentResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "consents": {
            "additionalProperties": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "object",
            "title": "Consents",
            "description": "Current consent status for all types"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "consents"
        ],
        "title": "ConsentResponse",
        "description": "Response for consent operations",
        "example": {
          "consents": {
            "analytics": {
              "granted": true,
              "ip_address": "192.168.1.1",
              "timestamp": "2025-01-01T12:00:00Z"
            },
            "marketing": {
              "granted": false,
              "timestamp": "2025-01-01T12:00:00Z"
            }
          },
          "user_id": "user:alice"
        }
      },
      "ConsentType": {
        "type": "string",
        "enum": [
          "analytics",
          "marketing",
          "third_party",
          "profiling"
        ],
        "title": "ConsentType",
        "description": "Types of consent that can be granted or revoked"
      },
      "CreateAPIKeyRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable name for the API key"
          },
          "expires_days": {
            "type": "integer",
            "title": "Expires Days",
            "description": "Days until expiration (default: 365)",
            "default": 365
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "CreateAPIKeyRequest",
        "description": "Request to create a new API key"
      },
      "CreateAPIKeyResponse": {
        "properties": {
          "key_id": {
            "type": "string",
            "title": "Key Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "created": {
            "type": "string",
            "title": "Created"
          },
          "expires_at": {
            "type": "string",
            "title": "Expires At"
          },
          "last_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used"
          },
          "api_key": {
            "type": "string",
            "title": "Api Key",
            "description": "API key (save securely, won't be shown again)"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "default": "API key created successfully. Save it securely - it will not be shown again."
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "name",
          "created",
          "expires_at",
          "api_key"
        ],
        "title": "CreateAPIKeyResponse",
        "description": "Response when creating API key (includes the key itself)"
      },
      "CreateServicePrincipalRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable name for the service"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Purpose/description of the service"
          },
          "authentication_mode": {
            "type": "string",
            "title": "Authentication Mode",
            "description": "Authentication mode: 'client_credentials' or 'service_account_user'",
            "default": "client_credentials"
          },
          "associated_user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Associated User Id",
            "description": "User to act as for permission inheritance (e.g., 'user:alice')"
          },
          "inherit_permissions": {
            "type": "boolean",
            "title": "Inherit Permissions",
            "description": "Whether to inherit permissions from associated user",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "name",
          "description"
        ],
        "title": "CreateServicePrincipalRequest",
        "description": "Request to create a new service principal"
      },
      "CreateServicePrincipalResponse": {
        "properties": {
          "service_id": {
            "type": "string",
            "title": "Service Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "authentication_mode": {
            "type": "string",
            "title": "Authentication Mode"
          },
          "associated_user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Associated User Id"
          },
          "owner_user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owner User Id"
          },
          "inherit_permissions": {
            "type": "boolean",
            "title": "Inherit Permissions"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "client_secret": {
            "type": "string",
            "title": "Client Secret",
            "description": "Client secret (save securely, won't be shown again)"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "default": "Service principal created successfully. Save the client_secret securely."
          }
        },
        "type": "object",
        "required": [
          "service_id",
          "name",
          "description",
          "authentication_mode",
          "associated_user_id",
          "owner_user_id",
          "inherit_permissions",
          "enabled",
          "created_at",
          "client_secret"
        ],
        "title": "CreateServicePrincipalResponse",
        "description": "Response when creating service principal (includes secret)"
      },
      "HTTPAuthorizationCredentials": {
        "properties": {
          "scheme": {
            "type": "string",
            "title": "Scheme"
          },
          "credentials": {
            "type": "string",
            "title": "Credentials"
          }
        },
        "type": "object",
        "required": [
          "scheme",
          "credentials"
        ],
        "title": "HTTPAuthorizationCredentials",
        "description": "The HTTP authorization credentials in the result of using `HTTPBearer` or\n`HTTPDigest` in a dependency.\n\nThe HTTP authorization header value is split by the first space.\n\nThe first part is the `scheme`, the second part is the `credentials`.\n\nFor example, in an HTTP Bearer token scheme, the client will send a header\nlike:\n\n```\nAuthorization: Bearer deadbeef12346\n```\n\nIn this case:\n\n* `scheme` will have the value `\"Bearer\"`\n* `credentials` will have the value `\"deadbeef12346\"`"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LoginRequest": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Username",
            "description": "Username"
          },
          "password": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Password",
            "description": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "LoginRequest",
        "description": "Login request with username and password"
      },
      "LoginResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWT access token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type (always 'bearer')",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Token expiration in seconds"
          },
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "User identifier"
          },
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Username"
          },
          "roles": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Roles",
            "description": "User roles"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "expires_in",
          "user_id",
          "username",
          "roles"
        ],
        "title": "LoginResponse",
        "description": "Login response with JWT token"
      },
      "RefreshTokenRequest": {
        "properties": {
          "refresh_token": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Refresh Token",
            "description": "Refresh token (Keycloak only)"
          },
          "current_token": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Token",
            "description": "Current access token (for InMemory provider)"
          }
        },
        "type": "object",
        "title": "RefreshTokenRequest",
        "description": "Token refresh request"
      },
      "RefreshTokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "New JWT access token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Token expiration in seconds"
          },
          "refresh_token": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Refresh Token",
            "description": "New refresh token (Keycloak only)"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "expires_in"
        ],
        "title": "RefreshTokenResponse",
        "description": "Token refresh response"
      },
      "RotateAPIKeyResponse": {
        "properties": {
          "key_id": {
            "type": "string",
            "title": "Key Id"
          },
          "new_api_key": {
            "type": "string",
            "title": "New Api Key",
            "description": "New API key"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "default": "API key rotated successfully. Update your client configuration."
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "new_api_key"
        ],
        "title": "RotateAPIKeyResponse",
        "description": "Response when rotating API key"
      },
      "RotateSecretResponse": {
        "properties": {
          "service_id": {
            "type": "string",
            "title": "Service Id"
          },
          "client_secret": {
            "type": "string",
            "title": "Client Secret",
            "description": "New client secret"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "default": "Secret rotated successfully. Update your service configuration."
          }
        },
        "type": "object",
        "required": [
          "service_id",
          "client_secret"
        ],
        "title": "RotateSecretResponse",
        "description": "Response when rotating service principal secret"
      },
      "SCIMAddress": {
        "properties": {
          "formatted": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Formatted"
          },
          "streetAddress": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Streetaddress"
          },
          "locality": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Locality"
          },
          "region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region"
          },
          "postalCode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Postalcode"
          },
          "country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "default": "work"
          },
          "primary": {
            "type": "boolean",
            "title": "Primary",
            "default": false
          }
        },
        "type": "object",
        "title": "SCIMAddress",
        "description": "SCIM address"
      },
      "SCIMEmail": {
        "properties": {
          "value": {
            "type": "string",
            "title": "Value"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "default": "work"
          },
          "primary": {
            "type": "boolean",
            "title": "Primary",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "value"
        ],
        "title": "SCIMEmail",
        "description": "SCIM email address"
      },
      "SCIMEnterpriseUser": {
        "properties": {
          "employeeNumber": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Employeenumber"
          },
          "costCenter": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Costcenter"
          },
          "organization": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Organization"
          },
          "division": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Division"
          },
          "department": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Department"
          },
          "manager": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Manager"
          }
        },
        "type": "object",
        "title": "SCIMEnterpriseUser",
        "description": "SCIM Enterprise User Extension (RFC 7643 Section 4.3)"
      },
      "SCIMGroup": {
        "properties": {
          "schemas": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Schemas",
            "default": [
              "urn:ietf:params:scim:schemas:core:2.0:Group"
            ]
          },
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "displayName": {
            "type": "string",
            "title": "Displayname"
          },
          "members": {
            "items": {
              "$ref": "#/components/schemas/SCIMMember"
            },
            "type": "array",
            "title": "Members",
            "default": []
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Meta"
          }
        },
        "type": "object",
        "required": [
          "displayName"
        ],
        "title": "SCIMGroup",
        "description": "SCIM 2.0 Group Resource"
      },
      "SCIMGroupMembership": {
        "properties": {
          "value": {
            "type": "string",
            "title": "Value"
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "$Ref"
          },
          "display": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "default": "direct"
          }
        },
        "type": "object",
        "required": [
          "value"
        ],
        "title": "SCIMGroupMembership",
        "description": "SCIM group membership"
      },
      "SCIMListResponse": {
        "properties": {
          "schemas": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Schemas",
            "default": [
              "urn:ietf:params:scim:api:messages:2.0:ListResponse"
            ]
          },
          "totalResults": {
            "type": "integer",
            "title": "Totalresults"
          },
          "startIndex": {
            "type": "integer",
            "title": "Startindex",
            "default": 1
          },
          "itemsPerPage": {
            "type": "integer",
            "title": "Itemsperpage"
          },
          "Resources": {
            "items": {},
            "type": "array",
            "title": "Resources"
          }
        },
        "type": "object",
        "required": [
          "totalResults",
          "itemsPerPage",
          "Resources"
        ],
        "title": "SCIMListResponse",
        "description": "SCIM List Response"
      },
      "SCIMMember": {
        "properties": {
          "value": {
            "type": "string",
            "title": "Value"
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "$Ref"
          },
          "display": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "default": "User"
          }
        },
        "type": "object",
        "required": [
          "value"
        ],
        "title": "SCIMMember",
        "description": "SCIM group member"
      },
      "SCIMName": {
        "properties": {
          "formatted": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Formatted"
          },
          "familyName": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Familyname"
          },
          "givenName": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Givenname"
          },
          "middleName": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Middlename"
          },
          "honorificPrefix": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Honorificprefix"
          },
          "honorificSuffix": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Honorificsuffix"
          }
        },
        "type": "object",
        "title": "SCIMName",
        "description": "SCIM user name"
      },
      "SCIMPatchOp": {
        "type": "string",
        "enum": [
          "add",
          "remove",
          "replace"
        ],
        "title": "SCIMPatchOp",
        "description": "SCIM PATCH operation types"
      },
      "SCIMPatchOperation": {
        "properties": {
          "op": {
            "$ref": "#/components/schemas/SCIMPatchOp"
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path"
          },
          "value": {
            "title": "Value"
          }
        },
        "type": "object",
        "required": [
          "op"
        ],
        "title": "SCIMPatchOperation",
        "description": "SCIM PATCH operation"
      },
      "SCIMPatchRequest": {
        "properties": {
          "schemas": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Schemas",
            "default": [
              "urn:ietf:params:scim:api:messages:2.0:PatchOp"
            ]
          },
          "Operations": {
            "items": {
              "$ref": "#/components/schemas/SCIMPatchOperation"
            },
            "type": "array",
            "title": "Operations"
          }
        },
        "type": "object",
        "required": [
          "Operations"
        ],
        "title": "SCIMPatchRequest",
        "description": "SCIM PATCH request"
      },
      "SCIMPhoneNumber": {
        "properties": {
          "value": {
            "type": "string",
            "title": "Value"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "default": "work"
          },
          "primary": {
            "type": "boolean",
            "title": "Primary",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "value"
        ],
        "title": "SCIMPhoneNumber",
        "description": "SCIM phone number"
      },
      "SCIMUser": {
        "properties": {
          "schemas": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Schemas",
            "default": [
              "urn:ietf:params:scim:schemas:core:2.0:User"
            ]
          },
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "externalId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Externalid"
          },
          "userName": {
            "type": "string",
            "title": "Username"
          },
          "name": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SCIMName"
              },
              {
                "type": "null"
              }
            ]
          },
          "displayName": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Displayname"
          },
          "nickName": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname"
          },
          "profileUrl": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profileurl"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "userType": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Usertype"
          },
          "preferredLanguage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferredlanguage"
          },
          "locale": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Locale"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "active": {
            "type": "boolean",
            "title": "Active",
            "default": true
          },
          "password": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Password"
          },
          "emails": {
            "items": {
              "$ref": "#/components/schemas/SCIMEmail"
            },
            "type": "array",
            "title": "Emails",
            "default": []
          },
          "phoneNumbers": {
            "items": {
              "$ref": "#/components/schemas/SCIMPhoneNumber"
            },
            "type": "array",
            "title": "Phonenumbers",
            "default": []
          },
          "addresses": {
            "items": {
              "$ref": "#/components/schemas/SCIMAddress"
            },
            "type": "array",
            "title": "Addresses",
            "default": []
          },
          "groups": {
            "items": {
              "$ref": "#/components/schemas/SCIMGroupMembership"
            },
            "type": "array",
            "title": "Groups",
            "default": []
          },
          "meta": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Meta"
          },
          "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SCIMEnterpriseUser"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "userName"
        ],
        "title": "SCIMUser",
        "description": "SCIM 2.0 User Resource\n\nCore schema with optional Enterprise extension."
      },
      "ServicePrincipalResponse": {
        "properties": {
          "service_id": {
            "type": "string",
            "title": "Service Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "authentication_mode": {
            "type": "string",
            "title": "Authentication Mode"
          },
          "associated_user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Associated User Id"
          },
          "owner_user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owner User Id"
          },
          "inherit_permissions": {
            "type": "boolean",
            "title": "Inherit Permissions"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "service_id",
          "name",
          "description",
          "authentication_mode",
          "associated_user_id",
          "owner_user_id",
          "inherit_permissions",
          "enabled",
          "created_at"
        ],
        "title": "ServicePrincipalResponse",
        "description": "Response containing service principal details"
      },
      "UserDataExport": {
        "properties": {
          "export_id": {
            "type": "string",
            "title": "Export Id",
            "description": "Unique export identifier"
          },
          "export_timestamp": {
            "type": "string",
            "title": "Export Timestamp",
            "description": "ISO timestamp of export"
          },
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "User identifier"
          },
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Username"
          },
          "email": {
            "type": "string",
            "title": "Email",
            "description": "User email address"
          },
          "profile": {
            "additionalProperties": true,
            "type": "object",
            "title": "Profile",
            "description": "User profile data"
          },
          "sessions": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Sessions",
            "description": "Active and recent sessions"
          },
          "conversations": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Conversations",
            "description": "Conversation history"
          },
          "preferences": {
            "additionalProperties": true,
            "type": "object",
            "title": "Preferences",
            "description": "User preferences and settings"
          },
          "audit_log": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Audit Log",
            "description": "User activity audit log"
          },
          "consents": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Consents",
            "description": "Consent records"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "export_id",
          "export_timestamp",
          "user_id",
          "username",
          "email"
        ],
        "title": "UserDataExport",
        "description": "Complete user data export for GDPR compliance\n\nIncludes all personal data associated with a user.",
        "example": {
          "audit_log": [],
          "consents": [],
          "conversations": [],
          "email": "alice@acme.com",
          "export_id": "exp_20250101120000_user123",
          "export_timestamp": "2025-01-01T12:00:00Z",
          "preferences": {
            "theme": "dark"
          },
          "profile": {
            "created_at": "2024-01-01",
            "name": "Alice"
          },
          "sessions": [
            {
              "created_at": "2025-01-01T10:00:00Z",
              "session_id": "sess_123"
            }
          ],
          "user_id": "user:alice",
          "username": "alice"
        }
      },
      "UserProfileUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User's full name"
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email",
            "description": "User's email address"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences",
            "description": "User preferences"
          }
        },
        "type": "object",
        "title": "UserProfileUpdate",
        "description": "User profile update model (GDPR Article 16 - Right to Rectification)",
        "example": {
          "email": "alice.smith@acme.com",
          "name": "Alice Smith",
          "preferences": {
            "language": "en",
            "theme": "dark"
          }
        }
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  },
  "tags": [
    {
      "name": "API Metadata",
      "description": "API version information and metadata for client compatibility"
    },
    {
      "name": "mcp",
      "description": "Model Context Protocol (MCP) endpoints for agent interaction"
    },
    {
      "name": "health",
      "description": "Health check and system status endpoints"
    },
    {
      "name": "auth",
      "description": "Authentication and authorization endpoints"
    },
    {
      "name": "GDPR Compliance",
      "description": "GDPR data protection and privacy rights endpoints (Articles 15-21)"
    },
    {
      "name": "API Keys",
      "description": "API key management for programmatic access"
    },
    {
      "name": "Service Principals",
      "description": "Service principal (service account) management for machine-to-machine authentication"
    },
    {
      "name": "SCIM 2.0",
      "description": "System for Cross-domain Identity Management (SCIM) 2.0 user and group provisioning"
    }
  ]
}
