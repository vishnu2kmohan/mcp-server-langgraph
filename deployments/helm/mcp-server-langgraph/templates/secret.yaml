{{- if not .Values.secrets.existingSecret }}
{{- if not .Values.externalSecrets.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "mcp-server-langgraph.fullname" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "mcp-server-langgraph.labels" . | nindent 4 }}
type: Opaque
stringData:
  # LLM Provider API Keys
  anthropic-api-key: {{ .Values.secrets.anthropicApiKey | default "REPLACE_ME" | quote }}
  google-api-key: {{ .Values.secrets.googleApiKey | default "" | quote }}
  openai-api-key: {{ .Values.secrets.openaiApiKey | default "" | quote }}

  # Authentication & Authorization
  jwt-secret-key: {{ .Values.secrets.jwtSecretKey | default "REPLACE_ME" | quote }}
  openfga-store-id: {{ .Values.secrets.openfgaStoreId | default "" | quote }}
  openfga-model-id: {{ .Values.secrets.openfgaModelId | default "" | quote }}

  # Keycloak
  keycloak-client-secret: {{ .Values.secrets.keycloakClientSecret | default "" | quote }}

  # PostgreSQL
  postgres-username: {{ .Values.secrets.postgresUsername | default "postgres" | quote }}
  postgres-password: {{ .Values.secrets.postgresPassword | default "" | quote }}

  # Redis
  redis-password: {{ .Values.secrets.redisPassword | default "" | quote }}

  # LangSmith Observability (optional)
  langsmith-api-key: {{ .Values.secrets.langsmithApiKey | default "" | quote }}

  # Secrets Management (optional)
  infisical-client-id: {{ .Values.secrets.infisicalClientId | default "" | quote }}
  infisical-client-secret: {{ .Values.secrets.infisicalClientSecret | default "" | quote }}
  infisical-project-id: {{ .Values.secrets.infisicalProjectId | default "" | quote }}
{{- end }}
{{- end }}
