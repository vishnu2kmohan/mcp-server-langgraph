apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: mcp-server-langgraph

resources:
  - ../../kubernetes/base/namespace.yaml
  - ../../kubernetes/base/deployment.yaml
  - ../../kubernetes/base/service.yaml
  - ../../kubernetes/base/configmap.yaml
  - ../../kubernetes/base/secret.yaml
  - ../../kubernetes/base/serviceaccount.yaml
  - ../../kubernetes/base/hpa.yaml
  - ../../kubernetes/base/pdb.yaml
  - ../../kubernetes/base/networkpolicy.yaml
  # PostgreSQL database (for OpenFGA and Keycloak)
  - ../../kubernetes/base/postgres-statefulset.yaml
  - ../../kubernetes/base/postgres-service.yaml
  # OpenFGA authorization
  - ../../kubernetes/base/openfga-deployment.yaml
  - ../../kubernetes/base/openfga-service.yaml
  # Keycloak resources
  - ../../kubernetes/base/keycloak-deployment.yaml
  - ../../kubernetes/base/keycloak-service.yaml
  # Redis session store resources
  - ../../kubernetes/base/redis-session-deployment.yaml
  - ../../kubernetes/base/redis-session-service.yaml

commonLabels:
  app: mcp-server-langgraph
  managed-by: kustomize

images:
  - name: mcp-server-langgraph
    newTag: 2.5.0
